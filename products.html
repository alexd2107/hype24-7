<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop - Hype24/7</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="products.html">Shop</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <h1>Shop All</h1>

    <!-- Search + Filter Controls -->
    <div class="controls">
      <input type="text" id="search" placeholder="Search...">
      <select id="sizeFilter">
        <option value="">All Sizes</option>
      </select>
    </div>

    <!-- Product Grid -->
    <div id="products" class="product-grid"></div>
  </main>

  <footer>
    <p>Â© 2025 Hype24/7</p>
  </footer>

  <script>
    const csvUrls = [
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=10727842&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=2080136486&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=184084881&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=1280515311&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=1929692327&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=1941135183&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=234881949&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=0&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=834494988&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=1649195567&single=true&output=csv",
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vRNR2S9ChRZ0QgYCH4EpAUK7KyVP-VwS4tTQhChdsGkA7h0sQNj0fjNvj-tDiAre66zzY6hIsKAdB-1/pub?gid=1978474466&single=true&output=csv"
    ];

    const productsContainer = document.getElementById("products");
    const searchInput = document.getElementById("search");
    const sizeFilter = document.getElementById("sizeFilter");

    let allProducts = [];

    async function fetchCSV(url) {
      const response = await fetch(url);
      const text = await response.text();
      const rows = text.split("\n").slice(1);
      return rows.map(row => {
        const cols = row.split(",");
        return {
          name: cols[0]?.trim(),
          size: cols[1]?.trim(),
          price: cols[2]?.trim()
        };
      }).filter(p => p.name);
    }

    async function loadProducts() {
      const promises = csvUrls.map(url => fetchCSV(url));
      const results = await Promise.all(promises);
      allProducts = results.flat();
      renderProducts(allProducts);
      populateSizeFilter(allProducts);
    }

    function renderProducts(products) {
      productsContainer.innerHTML = "";
      products.forEach(p => {
        const card = document.createElement("div");
        card.classList.add("product-card");
        card.innerHTML = `
          <h3>${p.name}</h3>
          <p><strong>Size:</strong> ${p.size || "N/A"}</p>
          <p><strong>Price:</strong> ${p.price || "On request"}</p>
        `;
        productsContainer.appendChild(card);
      });
    }

    function populateSizeFilter(products) {
      const sizes = [...new Set(products.map(p => p.size).filter(Boolean))];
      sizes.sort();
      sizes.forEach(size => {
        const option = document.createElement("option");
        option.value = size;
        option.textContent = size;
        sizeFilter.appendChild(option);
      });
    }

    function filterProducts() {
      const query = searchInput.value.toLowerCase();
      const size = sizeFilter.value;
      const filtered = allProducts.filter(p => {
        const matchesSearch = p.name.toLowerCase().includes(query);
        const matchesSize = !size || p.size === size;
        return matchesSearch && matchesSize;
      });
      renderProducts(filtered);
    }

    searchInput.addEventListener("input", filterProducts);
    sizeFilter.addEventListener("change", filterProducts);

    loadProducts();
  </script>
</body>
</html>
